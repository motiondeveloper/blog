---
title: 'How to write expressions in external (jsx) files'
date: 2020-08-23
difficulty: Advanced
tags: ['workflow', 'typescript']
pinned: false
author: timhaywood
description: >-
  How we write expression libraries files using TypeScript, RollupJS, and rollup-plugin-ae-jsx.
---

import {
  Note,
  Inform,
  Warn,
  ContentList,
  FileDownload,
} from 'components/callout';
import { Successful, Errorful } from 'components/codeOutput';
import { ToggleSection } from 'components/toggleSection';
import LocalVideo from 'components/localVideo';

## Why?

Here at Motion Developer, we maintain expression libraries such as:

- [eKeys](/blog/how-to-animate-with-expressions): Keyframe animation in After Effects expressions with easing
- [eBox](/blog/creating-scaling-rectangles): Create and scale rectangles within After Effects expressions
- [aeFunctions](/blog/using-aefunctions): Speed up your After Effects expression writing with a library of useful functions
- [and more](https://github.com/motiondeveloper)

These libraries are `js›.jsx` files which you import into After Effects, containing code you can execute in expressions.

### Writing expressions in external files

Writing these libraries in external `js›.jsx` files, rather than directly in expressions means we can:

- **Write the code once, and then use it in multiple After Effects projects.**

  Updating the one `.jsx` file will update any expressions that reference that file, allowing us to distribute abstractions for complex sections of code people can download and use.

- **Edit expressions in [VS Code](code.visualstudio.com).**

  While the new expressions editor has some great features, we feel more at home writing code in Visual Studio Code.

- **Improve performance.**

  After effects pre-processes expressions to allow for ExtendScript backwards compatibility. This pre-processing isn't done on code in external files, so there's a performance improvement for long expressions if there written in `js›.jsx` files.

### Limitations

The syntax for putting code in `js›.jsx` files is a modified JSON syntax. It's modified as the JSON specification doesn't allow functions, while After Effects `js›.jsx` does.
